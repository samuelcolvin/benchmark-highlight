# syntax highlighting benchmarks

A benchmark comparing [syntect (rust)](https://github.com/trishume/syntect), 
[pygments (python)](https://github.com/pygments/pygments) 
and [emphasize (JS)](https://github.com/wooorm/emphasize).

# Results

| Library          | Load (ms) | Highlight (ms) | Total (ms) |
|------------------|-----------|----------------|------------|
| syntect v4.6.0   | 12.3      | 48.0           | 60.3       |
| pygments v2.10.0 | 28.9      | 50.3           | 79.2       |
| emphasize v5.0.0 | 0.5       | 66.7           | 67.2       |

All code used to generate these benchmarks is available in this repo.

Notes:
* these times were generated by running `./run-rust.sh`, `./run-python.py` and `npm run run` respectively
* [this](https://github.com/samuelcolvin/pydantic/blob/master/pydantic/main.py) 1028 line python file was arbitrarily
  chosen to highlight for the benchmarks
* load should refer to the time taken to load/create the lexer and styles, e.g. if you wanted to highlight some other,
  similar code you would only have to wait the "Highlight" time
* I don't entirely trust the load vs. highlight times for javascript - presumably quite of the loading is deferred to 
  the "highlight" step. Running the code highlight code again takes 50ms, but that might have more to do with the JIT
* These benchmarks were generated with versions as follows:
  * OS: Ubuntu 21.04, 64-bit with CPU `Intel® Core™ i7-8700K CPU @ 3.70GHz × 12`
  * Rust: `rustc 1.55.0 (c8dfcfe04 2021-09-06)`
  * Python `3.9.5`
  * Node: `v14.17.6`

# Conclusions

**No conclusions here:** I think there's a high likelihood I'm not doing things in the most efficient way which
is leading to slower performance than you might expect.

Feel free to comment if you have any suggestions.
